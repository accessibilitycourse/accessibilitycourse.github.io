<!DOCTYPE html>
<html>
<head lang="en">
  <meta charset="UTF-8">
  <title>project6</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <style>
  img {
  border: 2px solid #CCC;
  margin: 2em !important;
  }
  body {
  padding: 5em 1em !important;
  }
  </style>
  <style type="text/css">
  .lst-kix_21pnktrgq2bt-4>li:before{content:"\0025cb  "}.lst-kix_21pnktrgq2bt-6>li:before{content:"\0025cf  "}.lst-kix_21pnktrgq2bt-1>li:before{content:"\0025cb  "}.lst-kix_21pnktrgq2bt-5>li:before{content:"\0025a0  "}.lst-kix_21pnktrgq2bt-0>li:before{content:"\0025cf  "}.lst-kix_21pnktrgq2bt-8>li:before{content:"\0025a0  "}ul.lst-kix_21pnktrgq2bt-1{list-style-type:none}ul.lst-kix_21pnktrgq2bt-2{list-style-type:none}ul.lst-kix_21pnktrgq2bt-0{list-style-type:none}.lst-kix_21pnktrgq2bt-7>li:before{content:"\0025cb  "}ul.lst-kix_21pnktrgq2bt-5{list-style-type:none}ul.lst-kix_21pnktrgq2bt-6{list-style-type:none}ul.lst-kix_21pnktrgq2bt-3{list-style-type:none}ul.lst-kix_21pnktrgq2bt-4{list-style-type:none}ul.lst-kix_21pnktrgq2bt-7{list-style-type:none}ul.lst-kix_21pnktrgq2bt-8{list-style-type:none}.lst-kix_21pnktrgq2bt-2>li:before{content:"\0025a0  "}.lst-kix_21pnktrgq2bt-3>li:before{content:"\0025cf  "}ol{margin:0;padding:0}table td,table th{padding:0}.c0{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Courier New";font-style:normal}.c7{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:"Arial";font-style:normal}.c15{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:26pt;font-family:"Arial";font-style:normal}.c18{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:18pt;font-family:"Arial";font-style:normal}.c9{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:italic}.c6{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c2{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c4{padding-top:18pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;text-align:left}.c12{padding-top:0pt;padding-bottom:3pt;line-height:1.15;page-break-after:avoid;text-align:left}.c17{background-color:#ffffff;max-width:468pt;padding:72pt 72pt 72pt 72pt}.c3{padding:0;margin:0}.c10{color:#1155cc;text-decoration:underline}.c11{color:inherit;text-decoration:inherit}.c1{font-weight:400;font-family:"Courier New"}.c8{margin-left:36pt;padding-left:0pt}.c16{vertical-align:super}.c14{color:#ff0000}.c13{font-style:italic}.c5{height:11pt}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}
  </style>
</head>
<body>
  <div>
    <ul>
      <a href="/">Home</a>:: <a href="/syllabus.html">Syllabus</a>
    </ul>
  </div>
  <div class="maincontent">
    <p class="c12 title" id="h.pa3nzyasjf4j"><span class="c15">Project 6:</span></p>
    <p class="c12 title" id="h.w2qjq1luhzlg"><span>An Image Labeler</span></p>
    <p class="c2"><span class="c13">Due: &#160;Tuesday, October 31st &#160;*</span><span class="c13 c14">in class</span><span class="c9">*</span></p>
    <p class="c2 c5"><span class="c9"></span></p>
    <p class="c2"><span class="c6">In this project, you will build a Chrome extension that will label the images on a web page that do not already have &#8220;alt text&#8221; using computer vision.</span></p>
    <p class="c2 c5"><span class="c6"></span></p>
    <h2 class="c4" id="h.1ffj6rg7qp1w"><span class="c7">Yet Another Chrome Extension</span></h2>
    <p class="c2"><span class="c6">The basis for this project will be a Chrome extension. To get started, copy and paste the extension that you built for Project 3 into a new directory. Enter its manifest to have a different name. I suggest something like, &#8220;Image Labeler,&#8221; and then load it into the browser. I would disable the extensions you created for prior weeks. As you add in more and more, the chances increase that something will conflict with something else, and it might be confusing to tell what is going wrong.</span></p>
    <p class="c2 c5"><span class="c6"></span></p>
    <p class="c2"><span>To make sure all the communication works, especially for images that aren&#8217;t hosted on the same domain as the main page, you&#8217;ll need to give your extension some more permissions, which you can do by editing your extension&#8217;s manifest. Mine looks like this:<br>
    <br></span> <span class="c1">{<br>
    &#160;"manifest_version": 2,<br>
    &#160;"name": "Automatic Alt Text",<br>
    &#160;"minimum_chrome_version": "24.0.1307.0",<br>
    &#160;"version": "0.0.1",<br>
    &#160;"homepage_url": "http://accessibilitycourse.com",<br>
    &#160;"icons": {<br>
    &#160;},<br>
    &#160;"content_scripts": [<br>
    &#160; &#160;{<br>
    &#160; &#160; &#160;"matches": [<br>
    &#160; &#160; &#160; &#160;"*://*/*"<br>
    &#160; &#160; &#160;],<br>
    &#160; &#160; &#160;"js": [<br>
    &#160; &#160; &#160; &#160; &#160;"scripts/jquery.min.js",<br>
    &#160; &#160; &#160; &#160; &#160;"scripts/ocr.js",<br>
    &#160; &#160; &#160; &#160; &#160;"scripts/tesseract.js"<br>
    &#160; &#160; &#160;],<br>
    &#160; &#160; &#160;"css": ["css/reader.css"],<br>
    &#160; &#160; &#160;"run_at": "document_idle"<br>
    &#160; &#160;}<br>
    &#160;],<br>
    &#160;"permissions": [<br>
    &#160; &#160;"*://*/*"<br>
    &#160;]<br>
    }</span></p>
    <p class="c2 c5"><span class="c6"></span></p>
    <h2 class="c4" id="h.sm33kkl0zjm9"><span class="c7">Checking which Images Might Need Alternative Text</span></h2>
    <p class="c2"><span class="c6">The first step is to iterate through the images on the page that you load with your extension to see which images might need better alternative text. You can iterate through the images like this:</span></p>
    <p class="c2 c5"><span class="c6"></span></p>
    <p class="c2"><span class="c0">$('img').each(function() {</span></p>
    <p class="c2"><span class="c0">&#160; if($(this).is(&#8216;img:not[alt]&#8217;) { &#160;// image does not have alt text</span></p>
    <p class="c2 c5"><span class="c0"></span></p>
    <p class="c2"><span class="c0">&#160; } else if($(this).attr(&#8220;alt&#8221;)==&#8221;&#8221;) { // image has empty alt text</span></p>
    <p class="c2 c5"><span class="c0"></span></p>
    <p class="c2"><span class="c0">&#160; } else { &#160;// image has some alt text defined</span></p>
    <p class="c2 c5"><span class="c0"></span></p>
    <p class="c2"><span class="c0">&#160; }</span></p>
    <p class="c2"><span class="c0">})</span></p>
    <p class="c2 c5"><span class="c6"></span></p>
    <p class="c2"><span class="c6">This allows you to access the different conditions an image might be in, but doesn&#8217;t do much to help you figure out how to fix a particular image.</span></p>
    <p class="c2 c5"><span class="c6"></span></p>
    <h2 class="c4" id="h.dve8aqamjoyr"><span class="c7">What&#8217;s in the Image?</span></h2>
    <p class="c2"><span class="c6">What makes good alternative text is highly dependent on image contents and how the image is used. Thus, we first need a way to start understanding what is in our images.</span></p>
    <p class="c2"><span class="c6"><br>
    To help facilitate that, I&#8217;ve made available the Amazon Rekognition service via a web service.<br></span></p>
    <p class="c2"><span>To access it, you&#8217;ll use something called AJAX, which will allow you to query the service from your extension, and then use the results to help determine the alternative text.<br></span><span class="c10">http://api.jquery.com/jquery.getjson/</span></p>
    <p class="c2 c5"><span class="c6"></span></p>
    <p class="c2"><span>You can call this service using this URL:<br></span><span class="c0">http://accessibilitycourse.com/support/rekognition.php?url=&lt;URL&gt;</span></p>
    <p class="c2 c5"><span class="c6"></span></p>
    <h2 class="c4" id="h.uzd4bf2qiw55"><span class="c7">Recognizing Text</span></h2>
    <p class="c2"><span class="c6">Another really handy thing you can do to help write alternative text is to recognize text. These days, basic OCR engines can be written entirely in Javascript(!), which is pretty crazy. For instance, this is a port of the popular Tesseract OCR:</span></p>
    <p class="c2"><span class="c1">http://tesseract.projectnaptha.com</span></p>
    <p class="c2 c5"><span class="c6"></span></p>
    <p class="c2"><span>Use this to generate alternative text for images that contain text.</span></p>
    <p class="c2 c5"><span class="c6"></span></p>
    <p class="c2"><span>You&#8217;ll want to download the</span> <span class="c1">tesseract.js</span><span class="c6">&#160;file, and include it from your extension.</span></p>
    <p class="c2"><span><br>
    The Tesseract Javascript library can be called in a number of different ways, but you&#8217;ll be most successful if you call the</span> <span class="c1">recognize</span><span>&#160;function on the URL of the image (src attribute). For instance, this code from the Tesseract.js web page would call</span> <span class="c1">recognize</span><span>&#160;on the first (0th) image in the page.<br>
    <br></span> <span class="c0">Tesseract.recognize($($("img")[0]).attr("src"))</span></p>
    <p class="c2"><span class="c0">&#160; &#160; .progress(message =&gt; console.log(message))</span></p>
    <p class="c2"><span class="c0">&#160; &#160; .catch(err =&gt; console.error(err))</span></p>
    <p class="c2"><span class="c0">&#160; &#160; .then(result =&gt; console.log(result))</span></p>
    <p class="c2"><span class="c0">&#160; &#160; .finally(function(resultOrError) {</span></p>
    <p class="c2"><span class="c0">&#160; &#160; &#160; console.log(resultOrError);</span></p>
    <p class="c2"><span class="c0">&#160; &#160; })</span></p>
    <p class="c2"><span class="c0">})</span></p>
    <p class="c2 c5"><span class="c0"></span></p>
    <p class="c2"><span>Note that instead of calling this directly on the jQuery result,</span> <span class="c1">recognize</span><span>&#160;function is call on the</span> <span class="c1">[0]</span><span class="c1 c16">th</span><span class="c6">&#160;element, which gives you the base DOM element that represents the image. You will want to replace the code in the finally function to have it instead attempt to add alternative text.</span></p>
    <p class="c2"><span>The easiest way to apply this to multiple images is to do so sequentially. That is, call this function once for one image, wait for it to complete, and then call it again for the next image.<br></span><span class="c6"><br></span></p>
    <p class="c2"><span class="c6">Further instructions for using Tesseract are on the web page above. Please follow them in order to add alternative text for your web page.</span></p>
    <h2 class="c4" id="h.31c996t40njm"><span class="c7">Assigning Alternative Text</span></h2>
    <p class="c2"><span class="c6">The idea is to then use what might be in the image, and possibly the recognized text to assign appropriate alternative text to each image.</span></p>
    <p class="c2 c5"><span class="c6"></span></p>
    <p class="c2"><span>You can assign new alternative text to an image using:<br></span><span class="c0">img.attr(&#8220;alt&#8221;, &#8220;the new alt text&#8221;)</span></p>
    <p class="c2 c5"><span class="c6"></span></p>
    <p class="c2"><span>The trick here is how to use the information available to assign &#8220;good&#8221; alternative text. I encourage you to think about how you might reason about this to assign the highest-quality alternative text that you can, while expressing appropriate confidence in the results that you get back.</span></p>
    <p class="c2 c5"><span class="c6"></span></p>
    <h2 class="c4" id="h.ky69dwrhvesw"><span class="c7">Grading</span></h2>
    <p class="c2"><span class="c6">Main components of our grading will be:<br></span></p>
    <p class="c2"><span class="c6">Using the appropriate keyboard commands, does the following happen:</span></p>
    <ul class="c3 lst-kix_21pnktrgq2bt-0 start">
      <li class="c2 c8"><span class="c6">Does your extension add (or consider adding) alternative text to each image</span></li>
      <li class="c2 c8"><span class="c6">Can it add alternative text from the Rekognition service?</span></li>
      <li class="c2 c8"><span class="c6">Can it add alternative text from the Javascript OCR?</span></li>
      <li class="c2 c8"><span class="c6">Did you do at least one thing to intelligently decide when to add this alternative text (or not)?<br></span></li>
    </ul>
  </div>
  <div style="height: 30px;"></div>
  <hr>
  <p><span>This page and contents are copyright Jeffrey P. Bigham except where noted.<br></span></p>
</body>
</html>
